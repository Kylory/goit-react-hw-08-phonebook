(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{101:function(t,e,n){t.exports={nav:"AppBar_nav__qbwGA",link:"AppBar_link__1K-sX",activeLink:"AppBar_activeLink__3LUBt"}},103:function(t,e,n){t.exports={searchContacts:"SearchContacts_searchContacts__8ZrJa"}},153:function(t,e,n){},155:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"DB_fetchContacts",(function(){return y})),n.d(r,"DB_postContact",(function(){return I})),n.d(r,"DB_deleteContact",(function(){return N})),n.d(r,"addContact",(function(){return B})),n.d(r,"deleteContact",(function(){return w})),n.d(r,"filterContacts",(function(){return R}));var c={};n.r(c),n.d(c,"rootReducer",(function(){return T}));var a={};n.r(a),n.d(a,"getContacts",(function(){return W})),n.d(a,"getFilter",(function(){return J})),n.d(a,"getFilteredContacts",(function(){return E})),n.d(a,"isLoading",(function(){return Z})),n.d(a,"error",(function(){return q}));var o=n(0),u=n.n(o),s=n(11),i=n.n(s),l=n(8),d=n(92),j=n(69),b=n(13),f=n(38),p=n(93),O=n.n(p),h=n(14),g=n.n(h),v=n(25),m=n(28),x=n.n(m),C=n(94),_=n.n(C);x.a.defaults.baseURL="https://connections-api.herokuapp.com";var k,U,L,y=Object(b.c)("contacts/fetchContacts",function(){var t=Object(v.a)(g.a.mark((function t(e,n){var r,c,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,x.a.get("/contacts");case 4:return c=t.sent,a=c.data,t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),I=Object(b.c)("contacts/postContact",function(){var t=Object(v.a)(g.a.mark((function t(e,n){var r,c,a,o,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.name,c=e.number,a=n.rejectWithValue,t.prev=2,t.next=5,x.a.post("/contacts",{name:"".concat(r),number:"".concat(c)});case 5:return o=t.sent,u=o.data,t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",a(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()),N=Object(b.c)("contacts/deleteContact",function(){var t=Object(v.a)(g.a.mark((function t(e,n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,x.a.delete("/contacts/".concat(e));case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),B=Object(b.b)("contactsList/addContact",(function(t){var e=t.name,n=t.number;return{payload:{id:_.a.generate(),name:e,number:n}}})),w=Object(b.b)("contacts/deleteContact"),R=Object(b.b)("contacts/filterContacts"),D=n(7),F=n(23),z=Object(b.d)([],(k={},Object(D.a)(k,r.DB_fetchContacts.fulfilled,(function(t,e){return e.payload})),Object(D.a)(k,r.addContact,(function(t,e){var n=e.payload;return[].concat(Object(j.a)(t),[n])})),Object(D.a)(k,r.DB_postContact.fulfilled,(function(){})),Object(D.a)(k,r.deleteContact,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),k)),A=Object(b.d)("",Object(D.a)({},r.filterContacts,(function(t,e){return e.payload}))),S=Object(b.d)(!1,(U={},Object(D.a)(U,r.DB_fetchContacts.pending,(function(){return!0})),Object(D.a)(U,r.DB_fetchContacts.fulfilled,(function(){return!1})),Object(D.a)(U,r.DB_fetchContacts.rejected,(function(){return!1})),Object(D.a)(U,r.DB_postContact.pending,(function(){return!0})),Object(D.a)(U,r.DB_postContact.fulfilled,(function(){return!1})),Object(D.a)(U,r.DB_postContact.rejected,(function(){return!1})),Object(D.a)(U,r.DB_deleteContact.pending,(function(){return!0})),Object(D.a)(U,r.DB_deleteContact.fulfilled,(function(){return!1})),Object(D.a)(U,r.DB_deleteContact.rejected,(function(){return!1})),U)),V=Object(b.d)(null,(L={},Object(D.a)(L,r.DB_fetchContacts.rejected,(function(t,e){return e.payload})),Object(D.a)(L,r.DB_fetchContacts.pending,(function(){return null})),Object(D.a)(L,r.DB_postContact.rejected,(function(t,e){return e.payload})),Object(D.a)(L,r.DB_postContact.pending,(function(){return null})),Object(D.a)(L,r.DB_deleteContact.rejected,(function(t,e){return e.payload})),Object(D.a)(L,r.DB_deleteContact.pending,(function(){return null})),L)),T=Object(F.b)({contactsList:z,filter:A,isLoading:S,error:V}),M=n(61),W=function(t){return t.contacts.contactsList},J=function(t){return t.contacts.filter},Z=function(t){return t.contacts.isLoading},q=function(t){return t.contacts.error},E=Object(M.a)([W,J],(function(t,e){if(t&&e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}return t})),G=n(19),H={key:"auth",storage:O.a,whitelist:["token"]},P=Object(b.a)({reducer:{contacts:c.rootReducer,auth:Object(f.g)(H,G.b)},middleware:function(t){return Object(j.a)(t({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}}))},devTools:!1}),X=Object(f.h)(P),Y=n(31),K=n(17),Q=n(37),$=n(70),tt=n(2),et=["children","redirectTo"];function nt(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object($.a)(t,et),a=Object(l.c)(G.c.isLoggedIn);return Object(tt.jsx)(K.b,Object(Q.a)(Object(Q.a)({},c),{},{children:a?e:Object(tt.jsx)(K.a,{to:r})}))}var rt=["children","redirectTo","restricted"];function ct(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=t.restricted,a=void 0!==c&&c,o=Object($.a)(t,rt),u=Object(l.c)(G.c.isLoggedIn)&&a;return Object(tt.jsx)(K.b,Object(Q.a)(Object(Q.a)({},o),{},{children:u?Object(tt.jsx)(K.a,{to:r}):e}))}var at=n(96),ot=n.n(at);function ut(t){var e=t.children;return Object(tt.jsx)("div",{className:ot.a.container,children:e})}var st=n(53),it=n.n(st);function lt(){return Object(tt.jsxs)("div",{className:it.a.AuthNav,children:[Object(tt.jsx)(Y.b,{to:"/register",className:it.a.link,activeClassName:it.a.activeLink,children:"Register"}),Object(tt.jsx)(Y.b,{to:"/login",className:it.a.link,activeClassName:it.a.activeLink,children:"Log In"})]})}var dt=n(58),jt=n.n(dt);function bt(){var t=Object(l.c)(G.c.isLoggedIn);return Object(tt.jsxs)(tt.Fragment,{children:[Object(tt.jsx)(Y.b,{exact:!0,to:"/",className:jt.a.link,activeClassName:jt.a.activeLink,children:"Home"}),t&&Object(tt.jsx)(Y.b,{to:"/contacts",className:jt.a.link,activeClassName:jt.a.activeLink,children:"Contacts"})]})}var ft=n(189),pt=n(97),Ot=n.n(pt),ht=n(71),gt=n.n(ht);function vt(){var t=Object(l.c)(G.c.getUserName),e=Object(l.b)();return Object(tt.jsxs)("div",{className:gt.a.UserMenu,children:[Object(tt.jsx)(Ot.a,{}),Object(tt.jsxs)("span",{className:gt.a.name,children:["Hello, ",t]}),Object(tt.jsx)(ft.a,{className:gt.a.button,type:"button",onClick:function(){e(G.a.logOut())},size:"small",variant:"contained",children:"Log out"})]})}var mt=n(101),xt=n.n(mt);function Ct(){var t=Object(l.c)(G.c.isLoggedIn);return Object(tt.jsxs)("nav",{className:xt.a.nav,children:[Object(tt.jsx)(bt,{}),t?Object(tt.jsx)(vt,{}):Object(tt.jsx)(lt,{})]})}var _t=n(47),kt=n(193),Ut=n(81),Lt=n(59),yt=n.n(Lt);function It(){var t=Object(o.useState)(""),e=Object(_t.a)(t,2),n=e[0],c=e[1],u=Object(o.useState)(""),s=Object(_t.a)(u,2),i=s[0],d=s[1],j=Object(o.useState)(!1),b=Object(_t.a)(j,2),f=b[0],p=b[1],O=""===n||""===i,h=Object(l.c)(a.getContacts),m=Object(l.b)(),x=function(t){p(!1);var e=t.target,n=e.name,r=e.value;switch(n){case"name":c(r);break;case"number":d(r)}},C=function(){c(""),d("")};return Object(tt.jsxs)(tt.Fragment,{children:[f&&Object(tt.jsx)(Ut.a,{message:n+" is already in contacts"}),Object(tt.jsxs)("form",{className:yt.a.contactForm,onSubmit:function(t){t.preventDefault(),h&&h.find((function(t){return t.name===n}))?p(!0):(p(!1),m(r.addContact({name:n,number:i})),Object(v.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(r.DB_postContact({name:n,number:i}));case 2:return t.next=4,m(r.DB_fetchContacts());case 4:case"end":return t.stop()}}),t)})))(),C())},noValidate:!0,autoComplete:"off",children:[Object(tt.jsx)(kt.a,{className:yt.a.name,onChange:x,name:"name",type:"text",value:n,size:"small",label:"Name",variant:"outlined"}),Object(tt.jsx)(kt.a,{className:yt.a.number,onChange:x,name:"number",type:"number",value:i,size:"small",label:"Number",variant:"outlined"}),Object(tt.jsx)(ft.a,{className:yt.a.button,disabled:O,type:"submit",size:"small",variant:"contained",children:"Add contact"})]})]})}var Nt=n(192),Bt=n(102),wt=n.n(Bt),Rt=n(72),Dt=n.n(Rt);function Ft(){var t=Object(l.c)(a.getFilteredContacts),e=Object(l.c)(G.c.isLoggedIn),n=Object(l.c)(a.error),c=Object(l.b)();function u(){return(u=Object(v.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(r.deleteContact(e)),t.next=3,c(r.DB_deleteContact(e));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.useEffect)((function(){e&&c(r.DB_fetchContacts())}),[c,e]),Object(tt.jsx)(tt.Fragment,{children:n?Object(tt.jsxs)("div",{className:Dt.a.error,children:[n.message,", no conection to DB"]}):Object(tt.jsx)("ul",{className:Dt.a.ContactsList,children:t&&t.map((function(t){return Object(tt.jsxs)("li",{children:[t.name,": ",t.number,Object(tt.jsx)(Nt.a,{className:Dt.a.button,"aria-label":"delete",size:"small",onClick:function(){!function(t){u.apply(this,arguments)}(t.id)},children:Object(tt.jsx)(wt.a,{})})]},t.id)}))})})}var zt=n(103),At=n.n(zt);function St(){var t=Object(l.c)(a.getFilter),e=Object(l.b)();return Object(tt.jsx)(kt.a,{className:At.a.searchContacts,onChange:function(t){return e(r.filterContacts(t.target.value))},name:"filter",type:"text",value:t,size:"small",label:"Find contacts by name",variant:"outlined"})}var Vt=Object(o.lazy)((function(){return n.e(5).then(n.bind(null,206))})),Tt=Object(o.lazy)((function(){return n.e(4).then(n.bind(null,207))})),Mt=Object(o.lazy)((function(){return n.e(3).then(n.bind(null,208))})),Wt=function(){var t=Object(l.b)(),e=Object(l.c)(G.c.isLoggedIn),n=Object(l.c)(G.c.isFetchingCurrentUser);return Object(o.useEffect)((function(){function n(){return(n=Object(v.a)(g.a.mark((function n(){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(G.a.getUserInfo());case 2:e&&t(r.DB_fetchContacts());case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[t,e]),!n&&Object(tt.jsxs)(ut,{children:[Object(tt.jsx)(Ct,{}),Object(tt.jsx)(K.d,{children:Object(tt.jsxs)(o.Suspense,{fallback:"",children:[Object(tt.jsx)(ct,{path:"/",exact:!0,children:Object(tt.jsx)(Vt,{})}),Object(tt.jsxs)(nt,{path:"/contacts",redirectTo:"/login",children:[Object(tt.jsx)(It,{}),Object(tt.jsx)(St,{}),Object(tt.jsx)(Ft,{})]}),Object(tt.jsx)(ct,{path:"/register",restricted:!0,children:Object(tt.jsx)(Tt,{})}),Object(tt.jsx)(ct,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(tt.jsx)(Mt,{})})]})})]})};n(153),n(154);i.a.render(Object(tt.jsx)(u.a.StrictMode,{children:Object(tt.jsx)(l.a,{store:P,children:Object(tt.jsx)(d.a,{loading:null,persistor:X,children:Object(tt.jsx)(Y.a,{children:Object(tt.jsx)(Wt,{})})})})}),document.getElementById("root"))},19:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r}));var r={};n.r(r),n.d(r,"getUserName",(function(){return i})),n.d(r,"isLoggedIn",(function(){return l})),n.d(r,"isFetchingCurrentUser",(function(){return j})),n.d(r,"registerUserRejected",(function(){return d})),n.d(r,"logInUserRejected",(function(){return b}));var c,a=n(24),o=n(7),u=n(13),s=Object(u.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1,registerUserRejected:!1,logInUserRejected:!1},extraReducers:(c={},Object(o.a)(c,a.registerUser.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0,t.registerUserRejected=!1})),Object(o.a)(c,a.registerUser.rejected,(function(t,e){t.registerUserRejected=!0})),Object(o.a)(c,a.registerUserRejected,(function(t,e){t.registerUserRejected=!1})),Object(o.a)(c,a.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0,t.logInUserRejected=!1})),Object(o.a)(c,a.logIn.rejected,(function(t,e){t.logInUserRejected=!0})),Object(o.a)(c,a.logInUserRejected,(function(t,e){t.logInUserRejected=!1})),Object(o.a)(c,a.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(o.a)(c,a.getUserInfo.pending,(function(t,e){t.isFetchingCurrentUser=!0})),Object(o.a)(c,a.getUserInfo.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(o.a)(c,a.getUserInfo.rejected,(function(t,e){t.isFetchingCurrentUser=!1})),c)}).reducer,i=function(t){return t.auth.user.name},l=function(t){return t.auth.isLoggedIn},d=function(t){return t.auth.registerUserRejected},j=function(t){return t.auth.isFetchingCurrentUser},b=function(t){return t.auth.logInUserRejected}},24:function(t,e,n){"use strict";n.r(e),n.d(e,"registerUser",(function(){return d})),n.d(e,"logIn",(function(){return j})),n.d(e,"logOut",(function(){return b})),n.d(e,"getUserInfo",(function(){return f})),n.d(e,"logInUserRejected",(function(){return p})),n.d(e,"registerUserRejected",(function(){return O}));var r=n(14),c=n.n(r),a=n(25),o=n(28),u=n.n(o),s=n(13);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){u.a.defaults.headers.common.Authorization=""},d=Object(s.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/signup",e);case 4:return a=t.sent,o=a.data,i(o.token),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(s.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/login",e);case 4:return a=t.sent,o=a.data,i(o.token),t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),b=Object(s.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/logout");case 4:l(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(s.c)("auth/getUserInfo",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue(5));case 4:return i(a),t.prev=5,t.next=8,u.a.get("/users/current");case 8:return o=t.sent,s=o.data,t.abrupt("return",s);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),p=Object(s.b)("auth/logInUserRejected"),O=Object(s.b)("auth/registerUserRejected")},53:function(t,e,n){t.exports={link:"AuthNav_link__1M0VJ",activeLink:"AuthNav_activeLink__cXZet",AuthNav:"AuthNav_AuthNav__7YtDP"}},58:function(t,e,n){t.exports={link:"Navigation_link__2Rnfn",activeLink:"Navigation_activeLink__3f7st"}},59:function(t,e,n){t.exports={contactForm:"ContactForm_contactForm__2gfq1",name:"ContactForm_name__3Piu-",number:"ContactForm_number__2nJth",button:"ContactForm_button__3vVzT"}},71:function(t,e,n){t.exports={UserMenu:"UserMenu_UserMenu__3Zyqo",name:"UserMenu_name__1FmZ3"}},72:function(t,e,n){t.exports={ContactsList:"ContactsList_ContactsList__1vydB",error:"ContactsList_error__3_6c6"}},81:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(37),c=n(47),a=n(0),o=n.n(a),u=n(8),s=n(157),i=n(24),l=n(2);function d(t){var e=t.element,n=t.message,a=Object(u.b)(),d=o.a.useState({open:!0,vertical:"top",horizontal:"center"}),j=Object(c.a)(d,2),b=j[0],f=j[1],p=b.vertical,O=b.horizontal,h=b.open;return Object(l.jsx)("div",{children:Object(l.jsx)(s.a,{anchorOrigin:{vertical:p,horizontal:O},open:h,onClose:function(){switch(f(Object(r.a)(Object(r.a)({},b),{},{open:!1})),e){case"logInUserRejected":a(i.logInUserRejected());break;case"registerUserRejected":a(i.registerUserRejected())}},message:n},p+O)})}},96:function(t,e,n){t.exports={container:"Container_container__GAYyQ"}}},[[155,1,2]]]);
//# sourceMappingURL=main.4bee6b2a.chunk.js.map